generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Comment {
  userId     String
  postId     String
  content    String
  createdAt  DateTime @default(now())
  updatedAt  DateTime
  id         String   @id
  parentId   String
  replyForId String?
  Post       Post     @relation(fields: [postId], references: [id])
  UserInfo   UserInfo @relation(fields: [userId], references: [id])
}

model Image {
  id     String @id
  url    String
  postId String
  Post   Post   @relation(fields: [postId], references: [id])
}

model Post {
  id                               String     @id @default(cuid())
  authorId                         String
  hideLikeCounts                   Boolean
  turnOffCmt                       Boolean
  caption                          String?
  aspectRatio                      Float
  createdAt                        DateTime   @default(now())
  imagesUrl                        String[]
  updatedAt                        DateTime   @updatedAt
  Comment                          Comment[]
  Image                            Image[]
  UserInfo_Post_authorIdToUserInfo UserInfo   @relation("Post_authorIdToUserInfo", fields: [authorId], references: [id])
  UserInfo_PostToUserInfo          UserInfo[] @relation("PostToUserInfo")
}

model UserInfo {
  id                           String    @id
  imageUrl                     String
  userName                     String
  followes                     String[]
  followings                   String[]
  Comment                      Comment[]
  Post_Post_authorIdToUserInfo Post[]    @relation("Post_authorIdToUserInfo")
  Post_PostToUserInfo          Post[]    @relation("PostToUserInfo")
}
